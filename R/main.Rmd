---
title: "BAG3 Co-IP MS Analysis"
author: "Emir Turkes"
date: '`r strftime(Sys.time(), format = "%B %d, %Y")`'
output:
    html_document:
        number_sections: true
        theme: lumen
        toc: true
        toc_float:
            collapsed: false
            smooth_scroll: false
knit: (
    function(inputFile, encoding) {
        rmarkdown::render(
            inputFile,
            encoding = encoding,
            output_file = "../gdrive/results/bag3-co-ip-analysis.html"
            )
        }
    )
---

```{r license, include = FALSE}
#    This file is part of bag3-co-ip.
#    Copyright (C) 2019  Emir Turkes
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, either version 3 of the License, or
#    (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
#    Emir Turkes can be contacted at eturkes@bu.edu
```

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

*This is a broad analysis that prepares and characterizes the data to answer more specific questions in other projects and is intended to be imported as a Git submodule in those repositories.*

The background for this data is as follows:

- Co-IP MS (co-immunoprecipitation mass spectroscopy) using BAG3 as bait.
- scrRNA control and shBAG3 to knockdown BAG3 to examine BAG3 specific interactions.
- Approximately 90% efficient knockdown.
- Single replicate of mature rat primary cortical neurons (DIV 24).

# Raw data

First, let's take a look at the raw data output from Proteome Discoverer.  
The data is unmodified but some columns have been lightly edited outside of R for easier import.

```{r raw_data, include = TRUE, echo = FALSE}
dt <- data.table::data.table(
    readxl::read_excel(
        "../gdrive/proteome-discoverer/Ji_ProteinReport-ProteinReport_17-155-edited.xlsx"
        )
)

DT::datatable(dt)
```

# Data cleaning

We can reduce the amount of information to those most relevant for validating a Co-IP experiment.

```{r data_cleaning, include = TRUE, echo = FALSE}
# Select columns.
cols <- c("Genes", "Abundance Ratio: Scr/SH", "scrRNA Abundance", "shBAG3 Abundance")

# Rename and remove columns.
dt <- plyr::rename(dt,
                   c("Description" = cols[1],
                     "Summed Abundance Ratio (log2): (Scr) / (SH)" = cols[2],
                     "Scr Abundances" = cols[3],
                     "SH Abundances" = cols[4])
)

DT::datatable(dt)
```

# Session info

```{r session_info, include = TRUE, echo = FALSE}
devtools::session_info()
```
